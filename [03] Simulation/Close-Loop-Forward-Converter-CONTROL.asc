Version 4
SHEET 1 4276 1688
WIRE -624 -256 -736 -256
WIRE 1776 -256 1600 -256
WIRE 1824 -256 1776 -256
WIRE 1856 -256 1824 -256
WIRE 1856 -240 1856 -256
WIRE 1776 -224 1776 -256
WIRE -624 -208 -624 -256
WIRE 1600 -208 1600 -256
WIRE 1776 -112 1776 -160
WIRE 1856 -112 1856 -160
WIRE -624 -64 -624 -128
WIRE -512 96 -880 96
WIRE 368 96 -512 96
WIRE 464 96 368 96
WIRE 672 96 624 96
WIRE 800 96 736 96
WIRE 928 96 800 96
WIRE 976 96 928 96
WIRE 1104 96 1056 96
WIRE 1280 96 1104 96
WIRE 1760 96 1280 96
WIRE 1856 96 1760 96
WIRE 368 112 368 96
WIRE 464 112 464 96
WIRE 624 112 624 96
WIRE 1760 128 1760 96
WIRE 1856 128 1856 96
WIRE -880 144 -880 96
WIRE 1104 144 1104 96
WIRE -512 192 -512 96
WIRE 1984 224 1904 224
WIRE -64 240 -64 160
WIRE 368 256 368 192
WIRE 928 272 928 96
WIRE -64 288 -64 240
WIRE 1104 288 1104 208
WIRE 1760 288 1760 208
WIRE 1856 288 1760 288
WIRE 1104 304 1104 288
WIRE 1760 304 1760 288
WIRE 1904 304 1904 272
WIRE 1984 304 1904 304
WIRE -880 336 -880 224
WIRE -512 336 -512 272
WIRE -256 336 -512 336
WIRE 144 336 112 336
WIRE 240 336 224 336
WIRE 320 336 240 336
WIRE -512 368 -512 336
WIRE 464 368 464 192
WIRE 928 400 928 336
WIRE -352 416 -352 400
WIRE -352 416 -432 416
WIRE -256 416 -352 416
WIRE 192 416 112 416
WIRE 368 416 368 352
WIRE 368 416 240 416
WIRE 624 416 624 192
WIRE -352 432 -352 416
WIRE 192 464 192 416
WIRE 240 464 192 464
WIRE 256 464 240 464
WIRE 368 464 368 416
WIRE 368 464 336 464
WIRE -512 480 -512 448
WIRE 192 496 192 464
WIRE 192 496 112 496
WIRE -544 512 -624 512
WIRE -352 512 -544 512
WIRE -256 512 -256 496
WIRE -256 512 -352 512
WIRE 240 512 240 464
WIRE 368 512 368 464
WIRE -544 528 -544 512
WIRE -384 576 -448 576
WIRE -256 576 -304 576
WIRE 192 576 112 576
WIRE 368 624 368 592
WIRE 464 624 464 432
WIRE -384 656 -448 656
WIRE -256 656 -304 656
WIRE 144 656 112 656
WIRE 192 656 144 656
WIRE 1280 656 1280 96
WIRE 864 720 864 688
WIRE 864 720 752 720
WIRE 976 720 944 720
WIRE -384 736 -448 736
WIRE -256 736 -304 736
WIRE 176 736 112 736
WIRE 976 768 976 720
WIRE 976 768 768 768
WIRE 416 784 416 752
WIRE 464 784 416 784
WIRE 656 784 640 784
WIRE 672 784 656 784
WIRE 752 784 752 720
WIRE 1024 784 1024 768
WIRE 1024 784 976 784
WIRE 1088 784 1024 784
WIRE 1280 784 1280 736
WIRE 1280 784 1088 784
WIRE 1024 800 1024 784
WIRE 1088 800 1088 784
WIRE 1280 816 1280 784
WIRE -144 848 -144 800
WIRE 16 848 16 800
WIRE 384 848 224 848
WIRE 432 848 384 848
WIRE 384 880 384 848
WIRE 432 880 432 848
WIRE 464 880 432 880
WIRE 656 880 640 880
WIRE 720 880 656 880
WIRE 768 896 768 768
WIRE 784 896 768 896
WIRE 816 896 784 896
WIRE 832 896 816 896
WIRE 912 896 880 896
WIRE 720 912 720 880
WIRE 768 912 768 896
WIRE 768 912 720 912
WIRE 976 928 976 784
WIRE 976 928 848 928
WIRE 784 944 784 896
WIRE 1088 944 784 944
WIRE 384 960 384 944
WIRE 864 992 864 960
WIRE 912 992 912 896
WIRE 912 992 864 992
WIRE 864 1008 864 992
WIRE 1280 1008 1280 896
WIRE -320 1280 -320 1248
WIRE -320 1392 -320 1360
WIRE -1472 1488 -1472 1456
FLAG -64 160 Vaux
FLAG 240 576 0
FLAG -144 848 0
FLAG -448 736 0
FLAG -448 656 0
FLAG -448 576 0
FLAG 144 656 FB
FLAG -544 592 0
FLAG -432 480 0
FLAG -624 592 0
FLAG -352 400 Vref
FLAG -512 480 0
FLAG 1760 304 SEC
FLAG 1280 1008 SEC
FLAG 928 400 SEC
FLAG 864 1008 SEC
FLAG 384 960 0
FLAG -320 1392 SEC
FLAG 144 848 FB
FLAG -1472 1456 Vi
FLAG -736 -256 Vaux
FLAG 16 848 0
FLAG 368 624 0
FLAG 464 624 0
FLAG 0 240 0
FLAG -1472 1568 0
FLAG -880 336 0
FLAG -320 1248 0
FLAG -880 96 Vin
FLAG 1856 -112 SEC
FLAG 1776 -112 SEC
FLAG 1824 -256 VccBias
FLAG 176 736 Sout
FLAG 800 96 FWD
FLAG 864 688 VccBias
FLAG -624 -64 0
FLAG 1600 -128 SEC
FLAG 1104 288 SEC
FLAG 624 416 SEC
FLAG 416 672 Vaux
SYMBOL res 1744 112 R0
SYMATTR InstName R2
SYMATTR Value {10*RL}
SYMBOL cap 1088 144 R0
SYMATTR InstName C1
SYMATTR Value {Cf}
SYMATTR SpiceLine Rser=28m
SYMBOL diode 480 432 R180
WINDOW 0 24 64 Left 2
WINDOW 3 44 -116 VRight 2
SYMATTR InstName D2
SYMATTR Value RFUH25NS3S
SYMBOL ind2 960 112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value {Lf}
SYMATTR SpiceLine Rser=15m
SYMATTR Type ind
SYMBOL ind2 480 208 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName ind3
SYMATTR Value {L3}
SYMATTR Type ind
SYMATTR SpiceLine Rser=20m
SYMBOL ind2 608 96 R0
SYMATTR InstName ind2
SYMATTR Value {L2}
SYMATTR Type ind
SYMATTR SpiceLine Rser=20m
SYMBOL ind2 352 96 R0
WINDOW 0 -54 34 Left 2
WINDOW 3 -56 77 Left 2
SYMATTR InstName ind1
SYMATTR Value {L1}
SYMATTR Type ind
SYMATTR SpiceLine Rser=20m
SYMBOL bv -880 128 R0
SYMATTR InstName B1
SYMATTR Value V=V(Vi)
SYMBOL res 352 496 R0
SYMATTR InstName Rs
SYMATTR Value 8m
SYMBOL res 352 448 R90
WINDOW 0 52 87 VBottom 2
WINDOW 3 25 41 VTop 2
SYMATTR InstName R4
SYMATTR Value 47
SYMBOL cap 224 512 R0
WINDOW 0 48 25 Left 2
WINDOW 3 38 45 Left 2
SYMATTR InstName C3
SYMATTR Value 2.2n
SYMBOL res -288 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL res -400 672 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 160k
SYMBOL res -400 592 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 178k
SYMBOL cap -560 528 R0
WINDOW 0 54 -4 Left 2
WINDOW 3 40 20 Left 2
SYMATTR InstName C4
SYMATTR Value 2.2n
SYMBOL cap -448 416 R0
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMBOL res -368 416 R0
SYMATTR InstName R9
SYMATTR Value 12k
SYMBOL res -640 496 R0
WINDOW 0 -48 15 Left 2
WINDOW 3 -49 40 Left 2
SYMATTR InstName R10
SYMATTR Value 18k
SYMBOL res -528 176 R0
SYMATTR InstName R11
SYMATTR Value 240k
SYMBOL res -528 352 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL res 1264 640 R0
SYMATTR InstName R13
SYMATTR Value 25k
SYMBOL res 1264 800 R0
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 1072 848 R0
SYMATTR InstName R15
SYMATTR Value 8.2k
SYMBOL cap 1072 800 R0
SYMATTR InstName C7
SYMATTR Value 10n
SYMBOL res 768 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 4.7k
SYMBOL nmos 320 256 R0
WINDOW 0 95 26 VRight 2
WINDOW 3 69 -30 VRight 2
SYMATTR InstName M1
SYMATTR Value IPB200N25N3
SYMBOL PowerProducts\\LT1952-1 -64 528 R0
SYMATTR InstName U1
SYMBOL res -336 1264 R0
SYMATTR InstName R21
SYMATTR Value 1Meg
SYMBOL res 224 320 R0
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL res 176 560 R0
WINDOW 3 32 80 Left 2
WINDOW 0 39 52 Left 2
SYMATTR Value 100
SYMATTR InstName R1
SYMBOL res 240 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 20k
SYMBOL res 432 768 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 4.7k
SYMBOL voltage -1472 1472 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -198 134 Left 2
SYMATTR Value PWL(0 0 0.499m 0 0.5m 36 1m 36 2m 36 2.01m 60)
SYMATTR InstName Vi
SYMBOL res 1840 -256 R0
SYMATTR InstName R20
SYMATTR Value 39
SYMBOL cap 0 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100µ
SYMBOL cap 1760 -224 R0
SYMATTR InstName C6
SYMATTR Value 22µ
SYMBOL bv 1984 208 R0
SYMATTR InstName B3
SYMATTR Value V= if(V(Vin) >50,0, 5)
SYMBOL res 1840 112 R0
SYMATTR InstName R24
SYMATTR Value 0.6944
SYMBOL sw 1856 304 R180
SYMATTR InstName S1
SYMATTR Value NMOS
SYMBOL res 240 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 0
SYMBOL Optos\\PC817C 560 832 M0
SYMATTR InstName U5
SYMBOL tl431 816 912 R270
SYMATTR InstName U3
SYMBOL res 960 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 10k
SYMBOL voltage -624 -224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 11
SYMBOL voltage 1600 -224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL diode 672 112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL diode 944 336 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D156
SYMATTR Value D1
SYMBOL cap 368 880 R0
SYMATTR InstName C8
SYMATTR Value 10n
TEXT -1600 -536 Left 2 !.model NMOS SW(Ron=25m Roff=1Meg Vt=.5 Vh=-.4)
TEXT -1600 -512 Left 2 !.model D1 D(Ron=20m Roff=100G Vfwd=0.1)
TEXT -1616 -80 Left 2 !.tran 0 0.1 0 1e-7 startup
TEXT -1600 -448 Left 2 !K1 ind1 ind2 ind3 1
TEXT -1528 64 Left 2 !.param L1 190u\n.param L2  30.4u\n.param L3 190u\n.param L4 94u\n.param fs  200k\n.param Cf 220u\n.param RL 0.625\n.param Lf 20u\n.param Laux 20u\n.param Caux 20u
TEXT -1136 40 Left 2 !.ic V(C10) = 8\n.ic V(Vaux) = 8\n.ic V(C2) = 8
TEXT -1600 -560 Left 2 !.model HAT2266 VDMOS(Rg=0.5 Vto=2.3 Rd=4m Rs=1m Rb=5m Kp=70 lambda=.05 Cgdmax=0.65n Cgdmin=.08n Cgs=3.455n Cjo=1.2n Is=120p ksubthres=.1 mfg=Furkan Vds=60 Ron=12m Qg=25n)
TEXT 3144 -336 Left 2 !*****************************************************************************\n* TL431 MACROMODEL ***************3-26-92************************************\n* REV N/A ****************************************************************DBB\n*****************************************************************************\n*               REFERENCE\n*               |  ANODE\n*               |  |  CATHODE\n*               |  |  |\n*.SUBCKT  TL431 1  2  3\n* Reverse symbol\n* Anode Cathode Ref   adjusted to LTSPICE symbol\n.SUBCKT  TL431 2 3 1\nV1  6  7  DC  1.4V\nI1  2  4  1E-3\nR1  1  2  1.2E6\nR2  4  2  RMOD 2.495E3\nR3  5  7  .2\nD1  3  6  DMOD1\nD2  2  3  DMOD1\nD3  2  7  DMOD2\nE1  5  2  POLY(2)  (4,2)  (1,2)  0  710  -710\n.MODEL RMOD RES (TC1=1.4E-5 TC2=-1E-6)\n.MODEL DMOD1 D (RS=.3)\n.MODEL DMOD2 D (RS=1E-6)\n.ENDS\n
LINE Normal 560 1040 560 -256 2
LINE Normal 512 1040 512 -256 2
